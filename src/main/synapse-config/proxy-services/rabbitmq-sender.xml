<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse"
       name="rabbitmq-sender"
       transports="http"
       startOnLoad="true">
   <target>
      <inSequence>		
         <log level="custom">
            <property name="rabbitmq-sender" value="inSequence"/>
         </log>
         <log level="full"/>
         <property name="OUT_ONLY" value="true"/>
         <send>
            <endpoint name="rabbitmq">
               <address uri="rabbitmq:/rabbitmq-sender?rabbitmq.queue.autodeclare=false&amp;rabbitmq.server.host.name=localhost&amp;rabbitmq.server.port=5672&amp;rabbitmq.queue.name=queue1&amp;rabbitmq.queue.route.key=queue1&amp;rabbitmq.exchange.name=exchange1&amp;rabbitmq.connection.factory=CachedRabbitMQConnectionFactory"/>
            </endpoint>
         </send>
      </inSequence>
	  <faultSequence>
		<log level="custom">
				<property name="rabbitmq-sender" value="faultSequence" />
				<property name="ERROR_CODE" expression="$ctx:ERROR_CODE"/>
				<property name="ERROR_MESSAGE" expression="$ctx:ERROR_MESSAGE"/>
			</log>
		 <respond/>
	  </faultSequence>
   </target>
</proxy>
